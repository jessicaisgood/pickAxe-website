{"ast":null,"code":"var _jsxFileName = \"/Users/wangxi05104/Desktop/website/src/views/modal/LoginRegisterModal.js\";\nimport React from 'react';\nimport PropTypes from \"prop-types\";\nimport styles from '../../styles/modal/login-modal.module.scss';\nimport 'antd/dist/antd.css';\nimport { Modal, Input, Alert, Button, message, Icon, Result } from 'antd';\nimport CommonUtils from \"../../tools/CommonUtils\";\nimport StorageUtils from \"../../tools/StorageUtils\";\nimport WebServerRestClient from \"../../tools/WebServerRestClient\";\nexport default class LoginRegisterModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLogin: true,\n      email: '',\n      password: '',\n      showMessageDialog: false\n    };\n  }\n\n  componentDidMount() {}\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleInputFocus(event) {\n    const target = event.target;\n\n    if (target.type === 'text' || target.type === 'password') {\n      this.setState({\n        showMessageDialog: false\n      });\n    }\n  }\n\n  login() {\n    this.setState({\n      showMessageDialog: false\n    });\n    let email = this.state.email;\n    let password = this.state.password;\n\n    if (email == '') {\n      this.setState({\n        showMessageDialog: true,\n        message: \"Please enter the email address\"\n      });\n      return false;\n    }\n\n    if (!CommonUtils.checkEmail(email)) {\n      this.setState({\n        showMessageDialog: true,\n        message: \"Invalid email address format\"\n      });\n      return false;\n    }\n\n    if (password == '') {\n      this.setState({\n        showMessageDialog: true,\n        message: \"please enter the password\"\n      });\n      return false;\n    }\n\n    this.setState({\n      processing: true\n    });\n    new WebServerRestClient().POST('/open/web/login', {\n      email: this.state.email,\n      password: this.state.password\n    }).then(response => {\n      console.log(\"login response -> \" + JSON.stringify(response));\n      this.setState({\n        processing: false\n      });\n\n      if (response.code == 200) {\n        let userInfo = {\n          userId: response.data.userId,\n          email: response.data.email,\n          ethAddress: response.data.ethAddress,\n          token: response['msg']\n        };\n        StorageUtils.saveUser(userInfo);\n        window.CurrentUser = userInfo;\n        this.props.loginCallback(); //this.setState({showMessageDialog: true, message: \"Logged In successfully!\"});\n      } else {\n        this.setState({\n          showMessageDialog: true,\n          message: \"Logged In successfully!\"\n        }); //this.setState({showMessageDialog: true, message: response['msg']});\n      }\n    }).catch(err => {\n      this.setState({\n        processing: false\n      });\n      message.error(\"Error: \" + err.message);\n    });\n  }\n\n  render() {\n    return React.createElement(Modal, {\n      closable: false,\n      keyboard: true,\n      maskClosable: true,\n      destroyOnClose: true,\n      footer: null,\n      visible: this.props.visible,\n      onCancel: () => this.props.onRequestClose(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"modal_close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"close-circle\",\n      onClick: () => this.props.onRequestClose(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: styles.login,\n      style: {\n        display: this.state.isLogin ? 'block' : 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: styles.logo_image,\n      src: require('../../images/logo.png'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: styles.logo_title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"SquirrelVPN\"), React.createElement(\"div\", {\n      className: styles.form_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: 'text',\n      name: 'email',\n      className: styles.form_input,\n      placeholder: 'someone@gmail.com',\n      autoCapitalize: 'none',\n      onFocus: this.handleInputFocus.bind(this),\n      onChange: this.handleInputChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: styles.form_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Input.Password, {\n      type: 'password',\n      name: 'password',\n      className: styles.form_input,\n      placeholder: 'Password',\n      onFocus: this.handleInputFocus.bind(this),\n      onChange: this.handleInputChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: styles.form_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, this.state.showMessageDialog ? React.createElement(\"div\", {\n      className: \"message_box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      message: this.state.message,\n      type: \"warning\",\n      closable: true,\n      onClose: () => {\n        this.setState({\n          showMessageDialog: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })) : null), React.createElement(\"div\", {\n      className: styles.form_button_row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: styles.form_button,\n      loading: this.state.processing,\n      onClick: this.login.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, window.language.login_text)), React.createElement(\"div\", {\n      className: styles.link_download,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: styles.link_download,\n      onClick: () => {\n        // this.setState({isLogin: false})\n        Modal.info({\n          content: window.language.register_tip\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, window.language.register_link))), React.createElement(\"div\", {\n      className: styles.login,\n      style: {\n        display: this.state.isLogin ? 'none' : 'block'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: styles.logo_image,\n      src: require('../../images/logo.png'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: styles.logo_title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"SquirrelVPN\\u6CE8\\u518C\"), React.createElement(\"div\", {\n      className: styles.form_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: 'text',\n      name: 'email',\n      className: styles.form_input,\n      placeholder: 'someone@gmail.com',\n      autoCapitalize: 'none',\n      onFocus: this.handleInputFocus.bind(this),\n      onChange: this.handleInputChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: styles.form_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(Input.Password, {\n      type: 'password',\n      name: 'password',\n      className: styles.form_input,\n      style: {\n        textIndent: 0\n      },\n      placeholder: 'Password',\n      onFocus: this.handleInputFocus.bind(this),\n      onChange: this.handleInputChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: styles.form_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: 'text',\n      name: 'email',\n      className: styles.form_validation_input,\n      placeholder: 'Validation Code',\n      autoCapitalize: 'none',\n      onFocus: this.handleInputFocus.bind(this),\n      onChange: this.handleInputChange.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(Button, {\n      className: styles.form_validation_button,\n      loading: this.state.processing,\n      onClick: this.login.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Send\")), React.createElement(\"div\", {\n      className: styles.form_item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, this.state.showMessageDialog ? React.createElement(\"div\", {\n      className: \"message_box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      message: this.state.message,\n      type: \"warning\",\n      closable: true,\n      onClose: () => {\n        this.setState({\n          showMessageDialog: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    })) : null), React.createElement(\"div\", {\n      className: styles.form_button_row,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: styles.form_button,\n      loading: this.state.processing,\n      onClick: this.login.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"\\u6CE8\\u518C\")), React.createElement(\"div\", {\n      className: styles.link_download,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: styles.link_download,\n      onClick: () => this.setState({\n        isLogin: true\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"\\u5DF2\\u6709\\u8D26\\u53F7\\uFF1F\\u767B\\u5F55\"))));\n  }\n\n}\nLoginRegisterModal.propTypes = {\n  visible: PropTypes.bool,\n  loginCallback: PropTypes.func,\n  onRequestClose: PropTypes.func\n};","map":{"version":3,"sources":["/Users/wangxi05104/Desktop/website/src/views/modal/LoginRegisterModal.js"],"names":["React","PropTypes","styles","Modal","Input","Alert","Button","message","Icon","Result","CommonUtils","StorageUtils","WebServerRestClient","LoginRegisterModal","Component","constructor","props","state","isLogin","email","password","showMessageDialog","componentDidMount","handleInputChange","event","target","value","type","checked","name","setState","handleInputFocus","login","checkEmail","processing","POST","then","response","console","log","JSON","stringify","code","userInfo","userId","data","ethAddress","token","saveUser","window","CurrentUser","loginCallback","catch","err","error","render","visible","onRequestClose","display","logo_image","require","logo_title","form_item","form_input","bind","form_button_row","form_button","language","login_text","link_download","info","content","register_tip","register_link","textIndent","form_validation_input","form_validation_button","propTypes","bool","func"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from \"prop-types\";\nimport styles from '../../styles/modal/login-modal.module.scss';\nimport 'antd/dist/antd.css';\nimport {Modal, Input, Alert, Button, message, Icon, Result} from 'antd';\nimport CommonUtils from \"../../tools/CommonUtils\";\nimport StorageUtils from \"../../tools/StorageUtils\";\nimport WebServerRestClient from \"../../tools/WebServerRestClient\";\n\nexport default class LoginRegisterModal extends React.Component {\n\n    static propTypes = {\n        visible: PropTypes.bool,\n        loginCallback: PropTypes.func,\n        onRequestClose: PropTypes.func\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            isLogin: true,\n            email: '',\n            password: '',\n            showMessageDialog: false\n        }\n    }\n\n    componentDidMount() {\n\n    }\n\n    handleInputChange(event) {\n        const target = event.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const name = target.name;\n        this.setState({[name]: value});\n    }\n\n    handleInputFocus(event) {\n        const target = event.target;\n        if (target.type === 'text' || target.type === 'password') {\n            this.setState({showMessageDialog: false});\n        }\n    }\n\n    login() {\n        this.setState({showMessageDialog: false});\n        let email = this.state.email;\n        let password = this.state.password;\n        if (email == '') {\n            this.setState({showMessageDialog: true, message: \"Please enter the email address\"});\n            return false;\n        }\n        if(!CommonUtils.checkEmail(email)){\n            this.setState({showMessageDialog: true, message: \"Invalid email address format\"});\n            return false;\n        }\n        if (password == '') {\n            this.setState({showMessageDialog: true, message: \"please enter the password\"});\n            return false;\n        }\n        this.setState({processing: true});\n        new WebServerRestClient().POST('/open/web/login', {\n            email: this.state.email,\n            password: this.state.password\n        }).then(response => {\n            console.log(\"login response -> \" + JSON.stringify(response));\n            this.setState({processing: false});\n            if (response.code == 200) {\n                let userInfo = {\n                    userId: response.data.userId,\n                    email: response.data.email,\n                    ethAddress: response.data.ethAddress,\n                    token: response['msg']\n                };\n                StorageUtils.saveUser(userInfo);\n                window.CurrentUser = userInfo;\n                this.props.loginCallback();\n                //this.setState({showMessageDialog: true, message: \"Logged In successfully!\"});\n            } else {\n                this.setState({showMessageDialog: true, message: \"Logged In successfully!\"});\n                //this.setState({showMessageDialog: true, message: response['msg']});\n            }\n        }).catch(err => {\n            this.setState({processing: false});\n            message.error(\"Error: \" + err.message);\n        });\n    }\n\n    render() {\n            return (\n                <Modal\n                    closable={false}\n                    keyboard={true}\n                    maskClosable={true}\n                    destroyOnClose={true}\n                    footer={null}\n                    visible={this.props.visible}\n                    onCancel={() => this.props.onRequestClose()}>\n                    <div className=\"modal_close\">\n                        <Icon type=\"close-circle\" onClick={() => this.props.onRequestClose()}/>\n                    </div>\n                    <div className={styles.login} style={{display: this.state.isLogin ? 'block' : 'none'}}>\n                        <img className={styles.logo_image} src={require('../../images/logo.png')}/>\n                        <div className={styles.logo_title}>SquirrelVPN</div>\n                        <div className={styles.form_item}>\n                            <Input type={'text'} name={'email'} className={styles.form_input}\n                                   placeholder={'someone@gmail.com'}\n                                   autoCapitalize={'none'}\n                                   onFocus={this.handleInputFocus.bind(this)}\n                                   onChange={this.handleInputChange.bind(this)}/>\n                        </div>\n                        <div className={styles.form_item}>\n                            <Input.Password type={'password'} name={'password'} className={styles.form_input}\n                                   placeholder={'Password'}\n                                   onFocus={this.handleInputFocus.bind(this)}\n                                   onChange={this.handleInputChange.bind(this)}/>\n                        </div>\n                        <div className={styles.form_item}>\n                            {this.state.showMessageDialog ?\n                                <div className=\"message_box\">\n                                    <Alert message={this.state.message} type=\"warning\" closable={true}\n                                           onClose={() => {\n                                               this.setState({showMessageDialog: false})\n                                           }}/>\n                                </div>\n                                :\n                                null\n                            }\n                        </div>\n                        <div className={styles.form_button_row}>\n                            <Button className={styles.form_button} loading={this.state.processing}\n                                    onClick={this.login.bind(this)}>\n                                {window.language.login_text}\n                            </Button>\n                        </div>\n                        <div className={styles.link_download}>\n                            <span className={styles.link_download}\n                                  onClick={() => {\n                                      // this.setState({isLogin: false})\n                                      Modal.info({\n                                          content: window.language.register_tip\n                                      });\n                                  }}>\n                                {window.language.register_link}\n                            </span>\n                        </div>\n                    </div>\n\n                    <div className={styles.login} style={{display: this.state.isLogin ? 'none' : 'block'}}>\n                        <img className={styles.logo_image} src={require('../../images/logo.png')}/>\n                        <div className={styles.logo_title}>SquirrelVPN注册</div>\n                        <div className={styles.form_item}>\n                            <Input type={'text'} name={'email'} className={styles.form_input}\n                                   placeholder={'someone@gmail.com'}\n                                   autoCapitalize={'none'}\n                                   onFocus={this.handleInputFocus.bind(this)}\n                                   onChange={this.handleInputChange.bind(this)}/>\n                        </div>\n                        <div className={styles.form_item}>\n                            <Input.Password  type={'password'} name={'password'} className={styles.form_input}\n                                   style={{textIndent: 0}}\n                                   placeholder={'Password'}\n                                   onFocus={this.handleInputFocus.bind(this)}\n                                   onChange={this.handleInputChange.bind(this)}/>\n                        </div>\n                        <div className={styles.form_item}>\n                            <Input type={'text'} name={'email'} className={styles.form_validation_input}\n                                   placeholder={'Validation Code'}\n                                   autoCapitalize={'none'}\n                                   onFocus={this.handleInputFocus.bind(this)}\n                                   onChange={this.handleInputChange.bind(this)}/>\n                            <Button className={styles.form_validation_button} loading={this.state.processing}\n                                    onClick={this.login.bind(this)}>Send</Button>\n                        </div>\n                        <div className={styles.form_item}>\n                            {this.state.showMessageDialog ?\n                                <div className=\"message_box\">\n                                    <Alert message={this.state.message} type=\"warning\" closable={true}\n                                           onClose={() => {\n                                               this.setState({showMessageDialog: false})\n                                           }}/>\n                                </div>\n                                :\n                                null\n                            }\n                        </div>\n                        <div className={styles.form_button_row}>\n                            <Button className={styles.form_button} loading={this.state.processing}\n                                    onClick={this.login.bind(this)}>注册</Button>\n                        </div>\n                        <div className={styles.link_download}>\n                            <span className={styles.link_download} onClick={()=>this.setState({isLogin: true})}>已有账号？登录</span>\n                        </div>\n                    </div>\n                </Modal>\n            );\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}